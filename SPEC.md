SPEC.md
Dance Deck

Beat-Synced Loop Player & Video Deck for Dancers

追加仕様：Video Detail（再生・Loop編集画面）UI/UX 再設計

本アプリの Video Detail 画面は、
**「ループ練習に最適化された再生・範囲指定体験」**を最優先目的として設計する。

以下の仕様は 既存機能の整理・再配置であり、新機能追加ではない。

1. 情報設計（Information Architecture）
画面構成（上 → 下）

Video View（動画表示領域）

通常時は UI 非表示

画面タップで操作 UI をオーバーレイ表示

Playback / Loop 操作レイヤ

再生・ループに関する操作のみを集約

BPM や詳細設定は常時表示しない

Loop Length Selector

4 / 8 / 16 / 32 counts

ループ長を即時決定するための主要操作

Unified Timeline（統合タイムライン）

再生位置 + ループ範囲を 1本のタイムラインで表現

Loop Bookmarks

Home の Library タイルと同一ビジュアル

ループ保存のための操作単位

Metadata

タグ

メモ（autosave）

2. 操作系（Interaction Design）
2.1 再生・Loop操作の基本方針

Loop は単一トグル

ON / OFF のみ

Smart Loop / BPM Tap ボタンは常設しない

BPM 設定・Tap 操作は 必要時のみ表示される補助 UIとする

2.2 Loop Length Selector（counts）

4 / 8 / 16 / 32 counts ボタンを押すと：

現在の再生位置（または loopStart）を基準に

BPM に基づいて ループ範囲を一発決定

決定後も：

ループ範囲は手動で微調整可能（スナップ解除）

2.3 Unified Timeline（最重要）
構造（iOS 標準トリム UI を模倣）

1本の横長タイムライン

要素：

中央のプレイヘッド（再生位置）

黄色のループ範囲フレーム

左ハンドル：loopStart

右ハンドル：loopEnd

操作

左ハンドルドラッグ：開始位置変更

右ハンドルドラッグ：終了位置変更

フレーム内部ドラッグ：

ループ長を維持したまま横移動

タイムラインタップ／ドラッグ：

再生位置のみ変更（ループ範囲とは干渉しない）

誤操作防止ルール

再生位置操作とループ操作は タッチ領域を分離

最小／最大ループ長を設定

ループ操作中は視覚的に強調表示

3. 見た目（Visual Design）
デザイン原則

iOS 標準動画トリム UI を強く参照

学習コスト最小

美的品質を既存 OS に委ねる

新規独自 UI は極力作らない

具体指針

統合タイムライン：

フレーム・ハンドル・色味は iOS トリム風

Loop Bookmarks：

Home Library タイルと完全に同一コンポーネント

不要な常設 UI を排除し、触った時だけ現れる UIを基本とする

4. 実装に関する注意（Codex向け）

本仕様は UI再設計であり、データ構造変更を伴わない

既存の：

loopStart / loopEnd

BPM / counts

Bookmark 機能
を再配置・再接続すること

実装判断で迷う場合は：

推測で進めず

本 SPEC に不足があれば SPEC.md 更新 PR を作成すること

追加仕様は以上

1. 概要
1.1. コンセプト

本アプリ「Dance Deck」は、ストリートダンサーが日々直面する 動画管理の煩雑さ を解消し、
8カウント文化に最適化された練習体験 を提供するアプリである。

自身の練習動画や、スマホローカルに保存した MV / お手本動画を 一元管理 し、
ビート同期した固定長ループ を最小操作で作成・再生できることに価値を集中させる。

SNS動画の取得・DL・リンク管理は行わない

ダンサーが既にローカルに持っている動画を前提とする

「探す」手間をなくし、「踊る」時間を最大化する

1.2. ターゲットユーザー

プライマリ

初心者〜中級者のストリートダンサー

セカンダリ

K-POP / TikTokダンスの完コピ練習者

ダンスインストラクター（振り落とし・教材準備）

2. 開発方針
2.1. 開発フェーズ

フェーズ1
「統合された動画管理」＋「固定長ループを核とした練習体験」に集中

フェーズ2
比較再生（2画面）などの高度機能を追加（本仕様書では扱わない）

2.2. 対応プラットフォーム

iOS

Android

2.3. 技術スタック

Expo（React Native）

EAS / Dev Client 前提

ローカル動画再生のみ対応

サーバー不要（完全ローカル）

3. 機能仕様（フェーズ1）
3.1. 動画管理
3.1.1. ホーム画面（動画ライブラリ）

UIコンセプト

Instagram プロフィール画面に準拠した タイル形式グリッド

文字情報を極力排除し、サムネイルを主役とする

表示要素

動画サムネイルのみ

タイトル・タグ・メモ等は表示しない

操作

タイルタップ → 動画詳細画面へ遷移

スクロールで全動画を俯瞰可能

3.1.2. 動画の取り込み

対応ソース

端末ローカル動画のみ

取り込み方法

デバイスストレージをブラウズ

ユーザーが動画を選択

内部的な扱い

アプリ管理領域にコピー、または参照パス保持（実装都合で決定）

3.1.3. 検索機能

タグによる検索

AND / OR 条件指定

ホーム画面上部に検索UIを配置

3.2. 動画詳細画面（最重要画面）
3.2.1. 全体レイアウト（縦持ち）
┌──────────────┐
│  Video Player │
│ (loop / beat) │
├──────────────┤
│ Loop Bookmarks│  ← タイル
├──────────────┤
│ Tags           │
├──────────────┤
│ Memo           │
└──────────────┘


※ 横持ち時は動画を全面表示し、操作UIはYouTube同様オーバーレイ表示

3.2.2. 動画再生UI

再生 / 一時停止

シークバー

再生速度切替（0.25 / 0.5 / 0.75 / 1.0）

ミラー（左右反転）

UI方針

操作UIは 動画タップで表示

YouTube の操作感を参考に、クリーンで直感的に

3.3. 高度な練習ツール（コア機能）
3.3.1. 基本思想

非破壊編集

元動画は一切変更しない

すべて設定データとして保存

3.3.2. BPM設定

方法

Tap Tempo

± ボタンによる微調整

仕様

BPMは動画ごとに保持

Phase1では自動解析は行わない

3.3.3. 位相（ビート開始点）設定

再生中に「ここが1」ボタンをタップ

現在の再生位置をビートグリッド原点として記録

3.3.4. 固定長ループ

ループ長プリセット（拍数）

4カウント

8カウント（1エイト）

2エイト（16拍）

4エイト（32拍）

3.3.5. ループ窓スライドUX（差別化ポイント）

コンセプト

ループ長は固定

位置のみを横スライド

常にビートにスナップ

UI

プログレスバー上に

再生ヘッド

固定幅のループ窓

指で左右にドラッグ可能

挙動

指を離した位置は最寄りのビートに吸着

ループ開始・終了は自動計算

3.3.6. ループ再生挙動

再生位置 ≥ loopEnd − epsilon
→ loopStart に自動シーク

epsilon は端末差吸収用（例：0.05秒）

3.4. ループ・ブックマーク
3.4.1. 定義

「この動画の、このループ設定」 を保存する機能。

保存内容：

BPM

位相

ループ長（拍数）

ループ開始位置

3.4.2. ブックマークUI

動画詳細画面内

動画直下にタイル状で表示

ホーム画面の動画タイルと同一デザイン

操作

タイルタップ → 即ループ再生

複数保存可能

想定ユースケース

MV内の複数パート練習

振り落とし用の複数区間

レッスン準備

3.5. メタデータ管理
タグ

自由入力

入力補完あり

メモ

自由テキスト

練習メモ・注意点などを記録

4. データ保存方針

完全ローカル保存

外部サーバー不使用

保存対象：

動画参照

BPM / 位相 / ループ設定

ループブックマーク

タグ / メモ

5. 明示的にやらないこと（Phase1）

SNS連携

URL取り込み

撮影機能

オーバーレイ / 比較再生

クラウド同期

アカウント登録

6. UX成功条件

動画選択から 即ループに入れる

ダンサーが説明を読まずに使える

「このループ体験だけで入れる価値がある」と感じる

7. Phase2（参考）

BPM自動解析

比較再生

撮影補助
